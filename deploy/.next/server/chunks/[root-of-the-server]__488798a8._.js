module.exports=[248790,245387,830651,e=>{"use strict";var t=e.i(807668);e.i(635777);var r=e.i(274749),s=e.i(317890),i=e.i(348003),n=e.i(563943);let a={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},o={};for(let[e,t]of Object.entries(a))o[t]=Number.parseInt(e);function l(e,t="utf-8"){switch(t.toLowerCase()){case"utf-8":case"utf8":if(void 0!==globalThis.TextDecoder)return new globalThis.TextDecoder("utf-8").decode(e);var r=e;let s="",i=0;for(;i<r.length;){let e=r[i++];if(e<128)s+=String.fromCharCode(e);else if(e<224)s+=String.fromCharCode((31&e)<<6|63&r[i++]);else if(e<240)s+=String.fromCharCode((15&e)<<12|(63&r[i++])<<6|63&r[i++]);else{let t=(7&e)<<18|(63&r[i++])<<12|(63&r[i++])<<6|63&r[i++];t-=65536,s+=String.fromCharCode(55296+(t>>10&1023),56320+(1023&t))}}return s;case"utf-16le":var n=e;let o="";for(let e=0;e<n.length;e+=2)o+=String.fromCharCode(n[e]|n[e+1]<<8);return o;case"ascii":return String.fromCharCode(...e.map(e=>127&e));case"latin1":case"iso-8859-1":return String.fromCharCode(...e);case"windows-1252":var h=e;let f="";for(let e of h)e>=128&&e<=159&&a[e]?f+=a[e]:f+=String.fromCharCode(e);return f;default:throw RangeError(`Encoding '${t}' not supported`)}}function h(e="",t="utf-8"){switch(t.toLowerCase()){case"utf-8":case"utf8":if(void 0!==globalThis.TextEncoder)return new globalThis.TextEncoder().encode(e);var r=e;let s=[];for(let e=0;e<r.length;e++){let t=r.charCodeAt(e);t<128?s.push(t):t<2048?s.push(192|t>>6,128|63&t):t<65536?s.push(224|t>>12,128|t>>6&63,128|63&t):s.push(240|t>>18,128|t>>12&63,128|t>>6&63,128|63&t)}return new Uint8Array(s);case"utf-16le":var i=e;let n=new Uint8Array(2*i.length);for(let e=0;e<i.length;e++){let t=i.charCodeAt(e);n[2*e]=255&t,n[2*e+1]=t>>8}return n;case"ascii":return new Uint8Array([...e].map(e=>127&e.charCodeAt(0)));case"latin1":case"iso-8859-1":return new Uint8Array([...e].map(e=>255&e.charCodeAt(0)));case"windows-1252":return new Uint8Array([...e].map(e=>{let t=e.charCodeAt(0);return t<=255?t:void 0!==o[e]?o[e]:63}));default:throw RangeError(`Encoding '${t}' not supported`)}}e.s(["textDecode",()=>l,"textEncode",()=>h],245387);var f=e.i(180600);let u=/^[\x21-\x7e©][\x20-\x7e\x00()]{3}/,d={len:4,get:(e,t)=>{let r=l(e.subarray(t,t+d.len),"latin1");if(!r.match(u))throw new f.FieldDecodingError(`FourCC contains invalid characters: ${i.a2hex(r)} "${r}"`);return r},put:(e,t,r)=>{let s=h(r,"latin1");if(4!==s.length)throw new f.InternalParserError("Invalid length");return e.set(s,t),t+4}};e.s(["FourCcToken",0,d],830651);let c={len:52,get:(e,t)=>({ID:d.get(e,t),version:s.UINT32_LE.get(e,t+4)/1e3,descriptorBytes:s.UINT32_LE.get(e,t+8),headerBytes:s.UINT32_LE.get(e,t+12),seekTableBytes:s.UINT32_LE.get(e,t+16),headerDataBytes:s.UINT32_LE.get(e,t+20),apeFrameDataBytes:s.UINT32_LE.get(e,t+24),apeFrameDataBytesHigh:s.UINT32_LE.get(e,t+28),terminatingDataBytes:s.UINT32_LE.get(e,t+32),fileMD5:new s.Uint8ArrayType(16).get(e,t+36)})},p={len:24,get:(e,t)=>({compressionLevel:s.UINT16_LE.get(e,t),formatFlags:s.UINT16_LE.get(e,t+2),blocksPerFrame:s.UINT32_LE.get(e,t+4),finalFrameBlocks:s.UINT32_LE.get(e,t+8),totalFrames:s.UINT32_LE.get(e,t+12),bitsPerSample:s.UINT16_LE.get(e,t+16),channel:s.UINT16_LE.get(e,t+18),sampleRate:s.UINT32_LE.get(e,t+20)})},g={len:32,get:(e,t)=>({ID:new s.StringType(8,"ascii").get(e,t),version:s.UINT32_LE.get(e,t+8),size:s.UINT32_LE.get(e,t+12),fields:s.UINT32_LE.get(e,t+16),flags:w(s.UINT32_LE.get(e,t+20))})},m={len:8,get:(e,t)=>({size:s.UINT32_LE.get(e,t),flags:w(s.UINT32_LE.get(e,t+4))})};function w(e){return{containsHeader:(-0x80000000&e)!=0,containsFooter:(0x40000000&e)!=0,isHeader:(0x20000000&e)!=0,readOnly:(1&e)!=0,dataType:(6&e)>>1}}var y=f;let b=(0,t.default)("music-metadata:parser:APEv2"),E="APEv2",k="APETAGEX";class B extends(0,y.makeUnexpectedFileContentError)("APEv2"){}function A(e,t,r){return new T(e,t,r).tryParseApeHeader()}class T extends n.BasicParser{constructor(){super(...arguments),this.ape={}}static calculateDuration(e){let t=e.totalFrames>1?e.blocksPerFrame*(e.totalFrames-1):0;return(t+=e.finalFrameBlocks)/e.sampleRate}static async findApeFooterOffset(e,t){let r=new Uint8Array(g.len),s=e.position;if(t<=g.len)return void b(`Offset is too small to read APE footer: offset=${t}`);if(t>g.len){await e.readBuffer(r,{position:t-g.len}),e.setPosition(s);let i=g.get(r,0);if("APETAGEX"===i.ID)return i.flags.isHeader?b(`APE Header found at offset=${t-g.len}`):(b(`APE Footer found at offset=${t-g.len}`),t-=i.size),{footer:i,offset:t}}}static parseTagFooter(e,t,s){let i=g.get(t,t.length-g.len);if(i.ID!==k)throw new B("Unexpected APEv2 Footer ID preamble value");return r.fromBuffer(t),new T(e,r.fromBuffer(t),s).parseTags(i)}async tryParseApeHeader(){if(this.tokenizer.fileInfo.size&&this.tokenizer.fileInfo.size-this.tokenizer.position<g.len)return void b("No APEv2 header found, end-of-file reached");let e=await this.tokenizer.peekToken(g);if(e.ID===k)return await this.tokenizer.ignore(g.len),this.parseTags(e);if(b(`APEv2 header not found at offset=${this.tokenizer.position}`),this.tokenizer.fileInfo.size){let e=new Uint8Array(this.tokenizer.fileInfo.size-this.tokenizer.position);return await this.tokenizer.readBuffer(e),T.parseTagFooter(this.metadata,e,this.options)}}async parse(){let e=await this.tokenizer.readToken(c);if("MAC "!==e.ID)throw new B("Unexpected descriptor ID");this.ape.descriptor=e;let t=e.descriptorBytes-c.len,r=await (t>0?this.parseDescriptorExpansion(t):this.parseHeader());return this.metadata.setAudioOnly(),await this.tokenizer.ignore(r.forwardBytes),this.tryParseApeHeader()}async parseTags(e){let t=new Uint8Array(256),r=e.size-g.len;b(`Parse APE tags at offset=${this.tokenizer.position}, size=${r}`);for(let n=0;n<e.fields;n++){if(r<m.len){this.metadata.addWarning(`APEv2 Tag-header: ${e.fields-n} items remaining, but no more tag data to read.`);break}let a=await this.tokenizer.readToken(m);r-=m.len+a.size,await this.tokenizer.peekBuffer(t,{length:Math.min(t.length,r)});let o=i.findZero(t,0,t.length),h=await this.tokenizer.readToken(new s.StringType(o,"ascii"));switch(await this.tokenizer.ignore(1),r-=h.length+1,a.flags.dataType){case 0:{let e=(await this.tokenizer.readToken(new s.StringType(a.size,"utf8"))).split(/\x00/g);await Promise.all(e.map(e=>this.metadata.addTag(E,h,e)));break}case 1:if(this.options.skipCovers)await this.tokenizer.ignore(a.size);else{let e=new Uint8Array(a.size);await this.tokenizer.readBuffer(e),o=i.findZero(e,0,e.length);let t=l(e.subarray(0,o),"utf-8"),r=e.subarray(o+1);await this.metadata.addTag(E,h,{description:t,data:r})}break;case 2:b(`Ignore external info ${h}`),await this.tokenizer.ignore(a.size);break;case 3:b(`Ignore external info ${h}`),this.metadata.addWarning(`APEv2 header declares a reserved datatype for "${h}"`),await this.tokenizer.ignore(a.size)}}}async parseDescriptorExpansion(e){return await this.tokenizer.ignore(e),this.parseHeader()}async parseHeader(){let e=await this.tokenizer.readToken(p);if(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("container","Monkey's Audio"),this.metadata.setFormat("bitsPerSample",e.bitsPerSample),this.metadata.setFormat("sampleRate",e.sampleRate),this.metadata.setFormat("numberOfChannels",e.channel),this.metadata.setFormat("duration",T.calculateDuration(e)),!this.ape.descriptor)throw new B("Missing APE descriptor");return{forwardBytes:this.ape.descriptor.seekTableBytes+this.ape.descriptor.headerDataBytes+this.ape.descriptor.apeFrameDataBytes+this.ape.descriptor.terminatingDataBytes}}}e.s(["APEv2Parser",()=>T,"ApeContentError",()=>B,"tryParseApeHeader",()=>A],248790)},752306,(e,t,r)=>{function s(e,t,r,s){return Math.round(e/r)+" "+s+(t>=1.5*r?"s":"")}t.exports=function(e,t){t=t||{};var r,i,n,a,o=typeof e;if("string"===o&&e.length>0){var l=e;if(!((l=String(l)).length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(h){var f=parseFloat(h[1]);switch((h[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*f;case"weeks":case"week":case"w":return 6048e5*f;case"days":case"day":case"d":return 864e5*f;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*f;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*f;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*f;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:break}}}return}if("number"===o&&isFinite(e)){return t.long?(i=Math.abs(r=e))>=864e5?s(r,i,864e5,"day"):i>=36e5?s(r,i,36e5,"hour"):i>=6e4?s(r,i,6e4,"minute"):i>=1e3?s(r,i,1e3,"second"):r+" ms":(a=Math.abs(n=e))>=864e5?Math.round(n/864e5)+"d":a>=36e5?Math.round(n/36e5)+"h":a>=6e4?Math.round(n/6e4)+"m":a>=1e3?Math.round(n/1e3)+"s":n+"ms"}throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},717324,(e,t,r)=>{r.read=function(e,t,r,s,i){var n,a,o=8*i-s-1,l=(1<<o)-1,h=l>>1,f=-7,u=r?i-1:0,d=r?-1:1,c=e[t+u];for(u+=d,n=c&(1<<-f)-1,c>>=-f,f+=o;f>0;n=256*n+e[t+u],u+=d,f-=8);for(a=n&(1<<-f)-1,n>>=-f,f+=s;f>0;a=256*a+e[t+u],u+=d,f-=8);if(0===n)n=1-h;else{if(n===l)return a?NaN:1/0*(c?-1:1);a+=Math.pow(2,s),n-=h}return(c?-1:1)*a*Math.pow(2,n-s)},r.write=function(e,t,r,s,i,n){var a,o,l,h=8*n-i-1,f=(1<<h)-1,u=f>>1,d=5960464477539062e-23*(23===i),c=s?0:n-1,p=s?1:-1,g=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(o=+!!isNaN(t),a=f):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+u>=1?t+=d/l:t+=d*Math.pow(2,1-u),t*l>=2&&(a++,l/=2),a+u>=f?(o=0,a=f):a+u>=1?(o=(t*l-1)*Math.pow(2,i),a+=u):(o=t*Math.pow(2,u-1)*Math.pow(2,i),a=0));i>=8;e[r+c]=255&o,c+=p,o/=256,i-=8);for(a=a<<i|o,h+=i;h>0;e[r+c]=255&a,c+=p,a/=256,h-=8);e[r+c-p]|=128*g}},348003,773945,e=>{"use strict";var t=e.i(317890),r=e.i(180600);let s=Object.prototype.toString;new globalThis.TextDecoder("utf8"),new globalThis.TextEncoder;let i=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function n(e){var t;if(t=Uint8Array,!e||e.constructor!==t&&"[object Uint8Array]"!==s.call(e))throw TypeError(`Expected \`Uint8Array\`, got \`${typeof e}\``);let r="";for(let t=0;t<e.length;t++)r+=i[e[t]];return r}let a={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15,A:10,B:11,C:12,D:13,E:14,F:15};function o(e){if("string"!=typeof e)throw TypeError(`Expected \`string\`, got \`${typeof e}\``);if(e.length%2!=0)throw Error("Invalid Hex string length.");let t=e.length/2,r=new Uint8Array(t);for(let s=0;s<t;s++){let t=a[e[2*s]],i=a[e[2*s+1]];if(void 0===t||void 0===i)throw Error(`Invalid Hex character encountered at position ${2*s}`);r[s]=t<<4|i}return r}function l(e){let{byteLength:t}=e;return 6===t?0x100000000*e.getUint16(0)+e.getUint32(2):5===t?0x100000000*e.getUint8(0)+e.getUint32(1):4===t?e.getUint32(0):3===t?65536*e.getUint8(0)+e.getUint16(1):2===t?e.getUint16(0):1===t?e.getUint8(0):void 0}function h(e,t,r){return(e[t]&1<<r)!=0}function f(e,t,r,s){let i=t;if("utf-16le"===s){for(;0!==e[i]||0!==e[i+1];){if(i>=r)return r;i+=2}return i}for(;0!==e[i];){if(i>=r)return r;i++}return i}function u(e){let t=e.indexOf("\0");return -1===t?e:e.substr(0,t)}function d(e){return(e=e.replace(/^\x00+/g,"")).replace(/\x00+$/g,"")}function c(e,t,r,s){let i=t+~~(r/8),n=r%8,a=e[i];a&=255>>n;let o=8-n,l=s-o;return l<0?a>>=8-n-s:l>0&&(a<<=l,a|=c(e,t,r+o,l)),a}function p(e,t,r){return 1===c(e,t,r,1)}function g(e){let t=[];for(let r=0,s=e.length;r<s;r++){let s=Number(e.charCodeAt(r)).toString(16);t.push(1===s.length?`0${s}`:s)}return t.join(" ")}function m(e){let t=e.split(" ").map(e=>e.trim().toLowerCase());if(t.length>=1){let e=Number.parseFloat(t[0]);return 2===t.length&&"db"===t[1]?{dB:e,ratio:10**(e/10)}:{dB:10*Math.log10(e),ratio:e}}}function w(e){if(0===e.length)throw Error("decodeUintBE: empty Uint8Array");return l(new DataView(e.buffer,e.byteOffset,e.byteLength))}e.s(["getUintBE",()=>l,"hexToUint8Array",()=>o,"uint8ArrayToHex",()=>n],773945),e.s(["a2hex",()=>g,"decodeString",()=>function e(s,i){if(255===s[0]&&254===s[1])return e(s.subarray(2),i);if("utf-16le"===i&&254===s[0]&&255===s[1]){if((1&s.length)!=0)throw new r.FieldDecodingError("Expected even number of octets for 16-bit unicode string");return e(function(e){let t=e.length;if((1&t)!=0)throw new r.FieldDecodingError("Buffer length must be even");for(let r=0;r<t;r+=2){let t=e[r];e[r]=e[r+1],e[r+1]=t}return e}(s),i)}return new t.StringType(s.length,i).get(s,0)},"decodeUintBE",()=>w,"findZero",()=>f,"getBit",()=>h,"getBitAllignedNumber",()=>c,"isBitSet",()=>p,"stripNulls",()=>d,"toRatio",()=>m,"trimRightNull",()=>u],348003)},912714,(e,t,r)=>{t.exports=e.x("node:fs/promises",()=>require("node:fs/promises"))},635777,718746,339453,274749,e=>{"use strict";var t=e.i(912714);class r extends Error{constructor(){super("End-Of-Stream"),this.name="EndOfStreamError"}}class s extends Error{constructor(e="The operation was aborted"){super(e),this.name="AbortError"}}e.s(["AbortError",()=>s,"EndOfStreamError",()=>r],718746);class i{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((e,t)=>{this.reject=t,this.resolve=e})}}class n{constructor(){this.endOfStream=!1,this.interrupted=!1,this.peekQueue=[]}async peek(e,t=!1){let r=await this.read(e,t);return this.peekQueue.push(e.subarray(0,r)),r}async read(e,t=!1){if(0===e.length)return 0;let s=this.readFromPeekBuffer(e);if(this.endOfStream||(s+=await this.readRemainderFromStream(e.subarray(s),t)),0===s&&!t)throw new r;return s}readFromPeekBuffer(e){let t=e.length,r=0;for(;this.peekQueue.length>0&&t>0;){let s=this.peekQueue.pop();if(!s)throw Error("peekData should be defined");let i=Math.min(s.length,t);e.set(s.subarray(0,i),r),r+=i,t-=i,i<s.length&&this.peekQueue.push(s.subarray(i))}return r}async readRemainderFromStream(e,t){let i=0;for(;i<e.length&&!this.endOfStream;){if(this.interrupted)throw new s;let r=await this.readFromStream(e.subarray(i),t);if(0===r)break;i+=r}if(!t&&i<e.length)throw new r;return i}}class a extends n{constructor(e){if(super(),this.s=e,this.deferred=null,!e.read||!e.once)throw Error("Expected an instance of stream.Readable");this.s.once("end",()=>{this.endOfStream=!0,this.deferred&&this.deferred.resolve(0)}),this.s.once("error",e=>this.reject(e)),this.s.once("close",()=>this.abort())}async readFromStream(e,t){if(0===e.length)return 0;let r=this.s.read(e.length);if(r)return e.set(r),r.length;let s={buffer:e,mayBeLess:t,deferred:new i};return this.deferred=s.deferred,this.s.once("readable",()=>{this.readDeferred(s)}),s.deferred.promise}readDeferred(e){let t=this.s.read(e.buffer.length);t?(e.buffer.set(t),e.deferred.resolve(t.length),this.deferred=null):this.s.once("readable",()=>{this.readDeferred(e)})}reject(e){this.interrupted=!0,this.deferred&&(this.deferred.reject(e),this.deferred=null)}async abort(){this.reject(new s)}async close(){return this.abort()}}class o extends n{constructor(e){super(),this.reader=e}async abort(){return this.close()}async close(){this.reader.releaseLock()}}class l extends o{async readFromStream(e,t){if(0===e.length)return 0;let r=await this.reader.read(new Uint8Array(e.length),{min:t?void 0:e.length});return(r.done&&(this.endOfStream=r.done),r.value)?(e.set(r.value),r.value.length):0}}class h extends n{constructor(e){super(),this.reader=e,this.buffer=null}writeChunk(e,t){let r=Math.min(t.length,e.length);return e.set(t.subarray(0,r)),r<t.length?this.buffer=t.subarray(r):this.buffer=null,r}async readFromStream(e,t){if(0===e.length)return 0;let s=0;for(this.buffer&&(s+=this.writeChunk(e,this.buffer));s<e.length&&!this.endOfStream;){let t=await this.reader.read();if(t.done){this.endOfStream=!0;break}t.value&&(s+=this.writeChunk(e.subarray(s),t.value))}if(!t&&0===s&&this.endOfStream)throw new r;return s}abort(){return this.interrupted=!0,this.reader.cancel()}async close(){await this.abort(),this.reader.releaseLock()}}class f{constructor(e){this.numBuffer=new Uint8Array(8),this.position=0,this.onClose=e?.onClose,e?.abortSignal&&e.abortSignal.addEventListener("abort",()=>{this.abort()})}async readToken(e,t=this.position){let s=new Uint8Array(e.len);if(await this.readBuffer(s,{position:t})<e.len)throw new r;return e.get(s,0)}async peekToken(e,t=this.position){let s=new Uint8Array(e.len);if(await this.peekBuffer(s,{position:t})<e.len)throw new r;return e.get(s,0)}async readNumber(e){if(await this.readBuffer(this.numBuffer,{length:e.len})<e.len)throw new r;return e.get(this.numBuffer,0)}async peekNumber(e){if(await this.peekBuffer(this.numBuffer,{length:e.len})<e.len)throw new r;return e.get(this.numBuffer,0)}async ignore(e){if(void 0!==this.fileInfo.size){let t=this.fileInfo.size-this.position;if(e>t)return this.position+=t,t}return this.position+=e,e}async close(){await this.abort(),await this.onClose?.()}normalizeOptions(e,t){if(!this.supportsRandomAccess()&&t&&void 0!==t.position&&t.position<this.position)throw Error("`options.position` must be equal or greater than `tokenizer.position`");return{...{mayBeLess:!1,offset:0,length:e.length,position:this.position},...t}}abort(){return Promise.resolve()}}class u extends f{constructor(e,t){super(t),this.streamReader=e,this.fileInfo=t?.fileInfo??{}}async readBuffer(e,t){let s=this.normalizeOptions(e,t),i=s.position-this.position;if(i>0)return await this.ignore(i),this.readBuffer(e,t);if(i<0)throw Error("`options.position` must be equal or greater than `tokenizer.position`");if(0===s.length)return 0;let n=await this.streamReader.read(e.subarray(0,s.length),s.mayBeLess);if(this.position+=n,(!t||!t.mayBeLess)&&n<s.length)throw new r;return n}async peekBuffer(e,t){let s=this.normalizeOptions(e,t),i=0;if(s.position){let t=s.position-this.position;if(t>0){let r=new Uint8Array(s.length+t);return i=await this.peekBuffer(r,{mayBeLess:s.mayBeLess}),e.set(r.subarray(t)),i-t}if(t<0)throw Error("Cannot peek from a negative offset in a stream")}if(s.length>0){try{i=await this.streamReader.peek(e.subarray(0,s.length),s.mayBeLess)}catch(e){if(t?.mayBeLess&&e instanceof r)return 0;throw e}if(!s.mayBeLess&&i<s.length)throw new r}return i}async ignore(e){let t=Math.min(256e3,e),r=new Uint8Array(t),s=0;for(;s<e;){let i=e-s,n=await this.readBuffer(r,{length:Math.min(t,i)});if(n<0)return n;s+=n}return s}abort(){return this.streamReader.abort()}async close(){return this.streamReader.close()}supportsRandomAccess(){return!1}}class d extends f{constructor(e,t){super(t),this.uint8Array=e,this.fileInfo={...t?.fileInfo??{},...{size:e.length}}}async readBuffer(e,t){t?.position&&(this.position=t.position);let r=await this.peekBuffer(e,t);return this.position+=r,r}async peekBuffer(e,t){let s=this.normalizeOptions(e,t),i=Math.min(this.uint8Array.length-s.position,s.length);if(!s.mayBeLess&&i<s.length)throw new r;return e.set(this.uint8Array.subarray(s.position,s.position+i)),i}close(){return super.close()}supportsRandomAccess(){return!0}setPosition(e){this.position=e}}class c extends f{constructor(e,t){super(t),this.blob=e,this.fileInfo={...t?.fileInfo??{},...{size:e.size,mimeType:e.type}}}async readBuffer(e,t){t?.position&&(this.position=t.position);let r=await this.peekBuffer(e,t);return this.position+=r,r}async peekBuffer(e,t){let s=this.normalizeOptions(e,t),i=Math.min(this.blob.size-s.position,s.length);if(!s.mayBeLess&&i<s.length)throw new r;let n=await this.blob.slice(s.position,s.position+i).arrayBuffer();return e.set(new Uint8Array(n)),i}close(){return super.close()}supportsRandomAccess(){return!0}setPosition(e){this.position=e}}function p(e,t){let r=new a(e),s=t??{},i=s.onClose;return s.onClose=async()=>{if(await r.close(),i)return i()},new u(r,s)}function g(e,t){let r=function(e){try{let t=e.getReader({mode:"byob"});if(t instanceof ReadableStreamDefaultReader)return new h(t);return new l(t)}catch(t){if(t instanceof TypeError)return new h(e.getReader());throw t}}(e),s=t??{},i=s.onClose;return s.onClose=async()=>{if(await r.close(),i)return i()},new u(r,s)}function m(e,t){return new d(e,t)}function w(e,t){return new c(e,t)}e.s(["fromBlob",()=>w,"fromBuffer",()=>m,"fromStream",()=>p,"fromWebStream",()=>g],339453);class y extends f{static async fromFile(e){let r=await (0,t.open)(e,"r"),s=await r.stat();return new y(r,{fileInfo:{path:e,size:s.size}})}constructor(e,t){super(t),this.fileHandle=e,this.fileInfo=t.fileInfo}async readBuffer(e,t){let s=this.normalizeOptions(e,t);if(this.position=s.position,0===s.length)return 0;let i=await this.fileHandle.read(e,0,s.length,s.position);if(this.position+=i.bytesRead,i.bytesRead<s.length&&(!t||!t.mayBeLess))throw new r;return i.bytesRead}async peekBuffer(e,t){let s=this.normalizeOptions(e,t),i=await this.fileHandle.read(e,0,s.length,s.position);if(!s.mayBeLess&&i.bytesRead<s.length)throw new r;return i.bytesRead}async close(){return await this.fileHandle.close(),super.close()}setPosition(e){this.position=e}supportsRandomAccess(){return!0}}async function b(e,r){let s=p(e,r);if(e.path){let r=await (0,t.stat)(e.path);s.fileInfo.path=e.path,s.fileInfo.size=r.size}return s}let E=y.fromFile;e.s(["fromFile",0,E,"fromStream",()=>b],635777),e.i(339453),e.s(["EndOfStreamError",()=>r,"fromBlob",()=>w,"fromBuffer",()=>m,"fromWebStream",()=>g],274749)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__488798a8._.js.map