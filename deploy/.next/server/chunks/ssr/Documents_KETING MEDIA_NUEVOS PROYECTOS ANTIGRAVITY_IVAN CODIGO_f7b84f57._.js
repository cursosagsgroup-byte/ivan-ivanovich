module.exports=[616401,425604,a=>{"use strict";var b=a.i(740944);let c=(0,b.default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);a.s(["Mail",()=>c],616401);let d=(0,b.default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);a.s(["Phone",()=>d],425604)},420033,a=>{"use strict";let b=(0,a.i(740944).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);a.s(["Download",()=>b],420033)},186564,a=>{"use strict";var b=a.i(664755),c=a.i(326938),d=a.i(616401),e=a.i(425604),f=a.i(420033),g=a.i(109906);let h={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}};var i=a.i(849207);let j={date:(0,i.buildFormatLongFn)({formats:{full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:(0,i.buildFormatLongFn)({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:(0,i.buildFormatLongFn)({formats:{full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},k={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},l={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"};var m=a.i(673766);let n={ordinalNumber:(a,b)=>Number(a)+"º",era:(0,m.buildLocalizeFn)({values:{narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},defaultWidth:"wide"}),quarter:(0,m.buildLocalizeFn)({values:{narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},defaultWidth:"wide",argumentCallback:a=>Number(a)-1}),month:(0,m.buildLocalizeFn)({values:{narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},defaultWidth:"wide"}),day:(0,m.buildLocalizeFn)({values:{narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},defaultWidth:"wide"}),dayPeriod:(0,m.buildLocalizeFn)({values:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},defaultFormattingWidth:"wide"})};var o=a.i(930436),p=a.i(266013);let q={code:"es",formatDistance:(a,b,c)=>{let d,e=h[a];if(d="string"==typeof e?e:1===b?e.one:e.other.replace("{{count}}",b.toString()),c?.addSuffix)if(c.comparison&&c.comparison>0)return"en "+d;else return"hace "+d;return d},formatLong:j,formatRelative:(a,b,c,d)=>1!==b.getHours()?l[a]:k[a],localize:n,match:{ordinalNumber:(0,o.buildMatchPatternFn)({matchPattern:/^(\d+)(º)?/i,parsePattern:/\d+/i,valueCallback:function(a){return parseInt(a,10)}}),era:(0,p.buildMatchFn)({matchPatterns:{narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},defaultParseWidth:"any"}),quarter:(0,p.buildMatchFn)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:a=>a+1}),month:(0,p.buildMatchFn)({matchPatterns:{narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},defaultParseWidth:"any"}),day:(0,p.buildMatchFn)({matchPatterns:{narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,p.buildMatchFn)({matchPatterns:{narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:1}};function r(){let[a,h]=(0,c.useState)("students"),[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(!0),[r,s]=(0,c.useState)(null);(0,c.useEffect)(()=>{t()},[]);let t=async()=>{p(!0),s(null);try{let a=await fetch("/api/admin/database");if(!a.ok){if(401===a.status)throw Error("No autorizado. Por favor inicia sesión nuevamente como Administrador.");throw Error("Error al cargar datos del servidor.")}let b=await a.json();j(b.leads||[]),l(b.contacts||[]),n(b.students||[]),console.log("Datos cargados:",b)}catch(a){console.error("Error fetching database:",a),s(a.message||"Error desconocido")}finally{p(!1)}},u="leads"===a?i:"whatsapp"===a?k:m;return o?(0,b.jsx)("div",{className:"p-8 text-center text-slate-500",children:"Cargando datos..."}):r?(0,b.jsxs)("div",{className:"p-8 text-center bg-white rounded-xl border border-red-200",children:[(0,b.jsxs)("div",{className:"text-red-600 font-medium mb-2",children:["Error: ",r]}),(0,b.jsx)("button",{onClick:t,className:"text-blue-600 hover:text-blue-800 underline text-sm",children:"Intentar de nuevo"})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Base de Datos"}),(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsxs)("button",{onClick:()=>((b,c)=>{if(!b.length)return;let d=b.map(b=>"students"===a?{...b,enrollments:b._count?.enrollments||0,_count:void 0}:b),e=new Blob([[Object.keys(d[0]).join(","),...d.map(a=>Object.values(a).map(a=>`"${a}"`).join(","))].join("\n")],{type:"text/csv"}),f=window.URL.createObjectURL(e),g=document.createElement("a");g.href=f,g.download=`${c}.csv`,g.click()})((()=>{switch(a){case"students":return m;case"leads":return i;case"whatsapp":return k;default:return[]}})(),`keting-${a}`),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[(0,b.jsx)(f.Download,{className:"w-4 h-4"}),"Exportar CSV"]})})]}),(0,b.jsx)("div",{className:"border-b border-slate-200",children:(0,b.jsxs)("nav",{className:"-mb-px flex gap-6",children:[(0,b.jsxs)("button",{onClick:()=>h("students"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"students"===a?"border-[#B70126] text-[#B70126]":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:["Alumnos (",m.length,")"]}),(0,b.jsxs)("button",{onClick:()=>h("leads"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"leads"===a?"border-[#B70126] text-[#B70126]":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:["Leads Web (",i.length,")"]}),(0,b.jsxs)("button",{onClick:()=>h("whatsapp"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"whatsapp"===a?"border-[#B70126] text-[#B70126]":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:["WhatsApp (",k.length,")"]})]})}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-slate-200",children:[(0,b.jsx)("thead",{className:"bg-slate-50",children:(0,b.jsxs)("tr",{children:["students"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Fecha Registro"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Nombre"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Email"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Cursos"})]}),"leads"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Fecha"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Nombre"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Contacto"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Mensaje"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Fuente"})]}),"whatsapp"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Último Mensaje"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Teléfono"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Nombre"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Mensaje"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Estado"})]})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-slate-200",children:u.map(c=>(0,b.jsxs)("tr",{className:"hover:bg-slate-50",children:["students"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:(0,g.format)(new Date(c.createdAt),"dd MMM yyyy",{locale:q})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"font-medium text-slate-900",children:c.name||"Sin Nombre"})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600",children:c.email}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:(0,b.jsxs)("span",{className:"inline-flex items-center rounded-md bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 ring-1 ring-inset ring-blue-700/10",children:[c._count?.enrollments||0," cursos"]})})]}),"leads"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:(0,g.format)(new Date(c.createdAt),"dd MMM yyyy, HH:mm",{locale:q})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"font-medium text-slate-900",children:c.name})}),(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,b.jsxs)("div",{className:"text-sm text-slate-900 flex items-center gap-1",children:[(0,b.jsx)(d.Mail,{className:"w-3 h-3"})," ",c.email]}),c.phone&&(0,b.jsxs)("div",{className:"text-sm text-slate-500 flex items-center gap-1",children:[(0,b.jsx)(e.Phone,{className:"w-3 h-3"})," ",c.phone]})]}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("div",{className:"text-sm text-slate-600 line-clamp-2",title:c.message,children:c.message})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:(0,b.jsx)("span",{className:"px-2 py-1 rounded-full bg-blue-100 text-blue-800 text-xs font-medium",children:c.source})})]}),"whatsapp"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:(0,g.format)(new Date(c.lastMessageAt),"dd MMM yyyy, HH:mm",{locale:q})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-slate-900",children:c.phoneNumber}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:c.name||"-"}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("div",{className:"text-sm text-slate-600 line-clamp-2",children:c.lastMessage})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${"ACTIVE"===c.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:c.status})})]})]},c.id))})]})}),0===u.length&&(0,b.jsx)("div",{className:"p-8 text-center text-slate-500",children:"No hay registros encontrados."})]})]})}a.s(["default",()=>r],186564)}];

//# sourceMappingURL=Documents_KETING%20MEDIA_NUEVOS%20PROYECTOS%20ANTIGRAVITY_IVAN%20CODIGO_f7b84f57._.js.map