module.exports=[452992,a=>{"use strict";let b=(0,a.i(740944).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],452992)},888589,a=>{"use strict";let b=(0,a.i(740944).default)("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash",()=>b],888589)},103975,a=>{"use strict";var b=a.i(664755),c=a.i(326938);function d({onSuccess:a,onCancel:d}){let[e,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)("");(0,c.useEffect)(()=>{fetch("/api/courses").then(a=>a.json()).then(a=>f(a)).catch(a=>console.error(a))},[]);let u=async b=>{b.preventDefault(),h(!0);try{let b=await fetch("/api/coupons",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:i.toUpperCase(),discountType:"PERCENTAGE",discountValue:parseFloat(k),maxUses:m?parseInt(m):null,maxUsesPerUser:o?parseInt(o):null,expiresAt:q?new Date(q).toISOString():null,courseId:"all"===s?null:s})});if(!b.ok){let a=await b.json();alert(a.error||"Failed to create coupon");return}a()}catch(a){console.error(a),alert("Something went wrong")}finally{h(!1)}};return(0,b.jsxs)("form",{onSubmit:u,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Coupon Code"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",required:!0,value:i,onChange:a=>j(a.target.value.toUpperCase()),className:"flex-1 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"SUMMER2025"}),(0,b.jsx)("button",{type:"button",onClick:()=>{j(Math.random().toString(36).substring(2,8).toUpperCase())},className:"px-3 py-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 text-sm",children:"Generate"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Percentage (%)"}),(0,b.jsx)("input",{type:"number",required:!0,min:"1",max:"100",value:k,onChange:a=>l(a.target.value),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"20"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Specific Course (Optional)"}),(0,b.jsxs)("select",{value:s,onChange:a=>t(a.target.value),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"",children:"Apply to all courses"}),e.map(a=>(0,b.jsx)("option",{value:a.id,children:a.title},a.id))]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to create a global coupon"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Uses (Total Redemptions)"}),(0,b.jsx)("input",{type:"number",min:"1",value:m,onChange:a=>n(a.target.value),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"e.g. 100"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Uses Per User"}),(0,b.jsx)("input",{type:"number",min:"1",value:o,onChange:a=>p(a.target.value),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"e.g. 1"})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiration Date (Optional)"}),(0,b.jsx)("input",{type:"date",value:q,onChange:a=>r(a.target.value),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)("button",{type:"button",onClick:d,className:"flex-1 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:g,className:"flex-1 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:g?"Creating...":"Create Coupon"})]})]})}var e=a.i(452992),f=a.i(888589),g=a.i(109906);function h(){let[a,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(!1),m=async()=>{try{let a=await fetch("/api/coupons"),b=await a.json();Array.isArray(b)?h(b):(console.error("Expected array of coupons but got:",b),h([]),b.error&&console.error("API Error:",b.error))}catch(a){console.error("Error fetching coupons:",a),h([])}finally{j(!1)}};(0,c.useEffect)(()=>{m()},[]);let n=async a=>{if(confirm("Are you sure you want to delete this coupon?"))try{await fetch(`/api/coupons/${a}`,{method:"DELETE"}),m()}catch(a){console.error("Error deleting coupon:",a),alert("Failed to delete coupon")}},o=async(a,b)=>{try{await fetch(`/api/coupons/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!b})}),m()}catch(a){console.error("Error updating coupon:",a)}};return(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Coupons"}),(0,b.jsxs)("button",{onClick:()=>l(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-blue-700",children:[(0,b.jsx)(e.Plus,{size:20}),"Create Coupon"]})]}),k&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full",children:[(0,b.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Create New Coupon"}),(0,b.jsx)(d,{onSuccess:()=>{l(!1),m()},onCancel:()=>l(!1)})]})}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow overflow-hidden",children:[(0,b.jsxs)("table",{className:"w-full text-left",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"p-4 font-semibold text-gray-600",children:"Code"}),(0,b.jsx)("th",{className:"p-4 font-semibold text-gray-600",children:"Discount"}),(0,b.jsx)("th",{className:"p-4 font-semibold text-gray-600",children:"Usage"}),(0,b.jsx)("th",{className:"p-4 font-semibold text-gray-600",children:"Restriction"}),(0,b.jsx)("th",{className:"p-4 font-semibold text-gray-600",children:"Status"}),(0,b.jsx)("th",{className:"p-4 font-semibold text-gray-600",children:"Expires"}),(0,b.jsx)("th",{className:"p-4 font-semibold text-gray-600 text-right",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y",children:a.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"p-4 font-mono font-bold text-blue-600",children:a.code}),(0,b.jsx)("td",{className:"p-4",children:"PERCENTAGE"===a.discountType?`${a.discountValue}%`:`$${a.discountValue}`}),(0,b.jsxs)("td",{className:"p-4",children:[a.usedCount," / ",a.maxUses||"âˆž"]}),(0,b.jsx)("td",{className:"p-4 text-sm",children:a.course?(0,b.jsxs)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs",children:[a.course.title.substring(0,20),"..."]}):(0,b.jsx)("span",{className:"text-gray-500",children:"All Courses"})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)("button",{onClick:()=>o(a.id,a.isActive),className:`px-2 py-1 rounded text-xs font-semibold ${a.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.isActive?"Active":"Inactive"})}),(0,b.jsx)("td",{className:"p-4 text-sm text-gray-600",children:a.expiresAt?(0,g.format)(new Date(a.expiresAt),"MMM d, yyyy"):"-"}),(0,b.jsx)("td",{className:"p-4 text-right",children:(0,b.jsx)("button",{onClick:()=>n(a.id),className:"text-red-600 hover:text-red-800 p-2",children:(0,b.jsx)(f.Trash,{size:18})})})]},a.id))})]}),0===a.length&&!i&&(0,b.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No coupons found. Create one to get started."})]})]})}a.s(["default",()=>h],103975)}];

//# sourceMappingURL=Documents_KETING%20MEDIA_NUEVOS%20PROYECTOS%20ANTIGRAVITY_IVAN%20CODIGO_d6cca4d9._.js.map