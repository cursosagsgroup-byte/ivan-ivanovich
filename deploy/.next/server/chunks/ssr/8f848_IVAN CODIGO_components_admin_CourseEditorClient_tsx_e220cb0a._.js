module.exports=[462842,a=>{"use strict";var b=a.i(664755),c=a.i(326938),d=a.i(603864),e=a.i(507862),f=a.i(434005),g=a.i(354938),h=a.i(452992),i=a.i(888589),j=a.i(668125),k=a.i(914684),l=a.i(672123),m=a.i(740944);let n=(0,m.default)("file-question-mark",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]]),o=(0,m.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var p=a.i(712750);function q({initialCourse:a}){let m=(0,d.useRouter)(),[q,r]=(0,c.useState)(a),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(new Set),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)({title:"",content:"",videoUrl:"",duration:0}),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)({title:"",description:"",passingScore:70,timeLimit:0,questions:[]}),E=async()=>{t(!0);try{(await fetch(`/api/courses/${q.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:q.title,description:q.description,price:q.price,image:q.image,published:q.published})})).ok&&alert("Curso actualizado exitosamente")}catch(a){console.error("Error saving course:",a),alert("Error al guardar el curso")}finally{t(!1)}},F=async()=>{if(w)try{(await fetch(`/api/lessons/${w.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:y.title,content:y.content,videoUrl:y.videoUrl,order:w.order,duration:y.duration})})).ok&&(x(null),m.refresh())}catch(a){console.error("Error saving lesson:",a),alert("Error al guardar la lección")}},G=async()=>{let a=prompt("Título del módulo:");if(a)try{(await fetch(`/api/courses/${q.id}/modules`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:a,description:"",order:q.modules.length})})).ok&&m.refresh()}catch(a){console.error("Error adding module:",a)}},H=async a=>{if(confirm("¿Eliminar este módulo y todo su contenido?"))try{(await fetch(`/api/modules/${a}`,{method:"DELETE"})).ok&&m.refresh()}catch(a){console.error("Error deleting module:",a)}},I=async a=>{let b=prompt("Título de la lección:");if(!b)return;let c=q.modules.find(b=>b.id===a);try{(await fetch(`/api/modules/${a}/lessons`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:b,content:"",videoUrl:"",order:c?.lessons.length||0,duration:0})})).ok&&m.refresh()}catch(a){console.error("Error adding lesson:",a)}},J=async a=>{if(confirm("¿Eliminar esta lección?"))try{(await fetch(`/api/lessons/${a}`,{method:"DELETE"})).ok&&m.refresh()}catch(a){console.error("Error deleting lesson:",a)}},K=async a=>{let b=prompt("Título del quiz:");if(!b)return;let c=q.modules.find(b=>b.id===a);try{(await fetch(`/api/modules/${a}/quizzes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:b,description:"",passingScore:70,timeLimit:0,order:c?.quizzes.length||0})})).ok&&m.refresh()}catch(a){console.error("Error adding quiz:",a)}},L=async a=>{if(confirm("¿Eliminar este quiz?"))try{(await fetch(`/api/quizzes/${a}`,{method:"DELETE"})).ok&&m.refresh()}catch(a){console.error("Error deleting quiz:",a)}},M=async()=>{if(A)try{let a=C.questions.map(a=>({...a,options:"string"==typeof a.options?JSON.parse(a.options):a.options}));(await fetch(`/api/quizzes/${A.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:C.title,description:C.description,passingScore:C.passingScore,timeLimit:C.timeLimit,order:A.order,questions:a})})).ok&&(B(null),m.refresh())}catch(a){console.error("Error saving quiz:",a),alert("Error al guardar el quiz")}};return(0,b.jsxs)("div",{className:"max-w-5xl mx-auto space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsx)(e.default,{href:"/courses",className:"flex items-center text-slate-500 hover:text-slate-900",children:(0,b.jsx)(f.ArrowLeft,{className:"h-5 w-5"})}),(0,b.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Editar Curso"})]}),(0,b.jsxs)("button",{onClick:E,disabled:s,className:"flex items-center rounded-md bg-[#B70126] px-4 py-2 text-sm font-medium text-white hover:bg-red-800 disabled:opacity-50",children:[(0,b.jsx)(g.Save,{className:"mr-2 h-4 w-4"}),s?"Guardando...":"Guardar Cambios"]})]}),(0,b.jsxs)("div",{className:"rounded-xl border border-border bg-white p-6 shadow-sm",children:[(0,b.jsx)("h2",{className:"text-lg font-medium text-slate-900 mb-4",children:"Información Básica"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"Título"}),(0,b.jsx)("input",{type:"text",value:q.title,onChange:a=>r({...q,title:a.target.value}),className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 border"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"Descripción"}),(0,b.jsx)("textarea",{value:q.description,onChange:a=>r({...q,description:a.target.value}),rows:4,className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 border"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"Precio ($)"}),(0,b.jsx)("input",{type:"number",value:q.price,onChange:a=>r({...q,price:parseFloat(a.target.value)}),className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 border"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"Estado"}),(0,b.jsxs)("select",{value:q.published?"published":"draft",onChange:a=>r({...q,published:"published"===a.target.value}),className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 border",children:[(0,b.jsx)("option",{value:"draft",children:"Borrador"}),(0,b.jsx)("option",{value:"published",children:"Publicado"})]})]})]})]})]}),(0,b.jsxs)("div",{className:"rounded-xl border border-border bg-white p-6 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h2",{className:"text-lg font-medium text-slate-900",children:"Contenido del Curso"}),(0,b.jsxs)("button",{onClick:G,className:"flex items-center rounded-md bg-[#B70126] px-3 py-2 text-sm font-medium text-white hover:bg-red-800",children:[(0,b.jsx)(h.Plus,{className:"mr-2 h-4 w-4"}),"Agregar Módulo"]})]}),(0,b.jsx)("div",{className:"space-y-3",children:q.modules.map((a,c)=>(0,b.jsxs)("div",{className:"border border-slate-200 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,b.jsx)("button",{onClick:()=>{var b;let c;return b=a.id,void((c=new Set(u)).has(b)?c.delete(b):c.add(b),v(c))},className:"text-slate-500",children:u.has(a.id)?(0,b.jsx)(j.ChevronDown,{className:"h-5 w-5"}):(0,b.jsx)(k.ChevronRight,{className:"h-5 w-5"})}),(0,b.jsxs)("span",{className:"font-medium text-slate-900",children:[c+1,". ",a.title]}),(0,b.jsxs)("span",{className:"text-sm text-slate-500",children:["(",a.lessons.length," lecciones, ",a.quizzes.length," quizzes)"]})]}),(0,b.jsx)("button",{onClick:()=>H(a.id),className:"text-red-600 hover:text-red-800",children:(0,b.jsx)(i.Trash,{className:"h-4 w-4"})})]}),u.has(a.id)&&(0,b.jsxs)("div",{className:"p-4 space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-slate-700",children:"Lecciones"}),(0,b.jsx)("button",{onClick:()=>I(a.id),className:"text-sm text-[#B70126] hover:text-red-800",children:"+ Agregar Lección"})]}),(0,b.jsx)("div",{className:"space-y-2",children:a.lessons.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white border border-slate-200 rounded",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(l.BookOpen,{className:"h-4 w-4 text-slate-400"}),(0,b.jsx)("span",{className:"text-sm",children:a.title}),a.videoUrl&&(0,b.jsx)("span",{className:"text-xs text-green-600",children:"(Video)"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("button",{onClick:()=>{x(a),z({title:a.title,content:a.content||"",videoUrl:a.videoUrl||"",duration:a.duration||0})},className:"text-blue-600 hover:text-blue-800",children:(0,b.jsx)(o,{className:"h-3 w-3"})}),(0,b.jsx)("button",{onClick:()=>J(a.id),className:"text-red-600 hover:text-red-800",children:(0,b.jsx)(i.Trash,{className:"h-3 w-3"})})]})]},a.id))})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-slate-700",children:"Quizzes"}),(0,b.jsx)("button",{onClick:()=>K(a.id),className:"text-sm text-[#B70126] hover:text-red-800",children:"+ Agregar Quiz"})]}),(0,b.jsx)("div",{className:"space-y-2",children:a.quizzes.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white border border-slate-200 rounded",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(n,{className:"h-4 w-4 text-slate-400"}),(0,b.jsx)("span",{className:"text-sm",children:a.title}),(0,b.jsxs)("span",{className:"text-xs text-slate-500",children:["(",a.questions.length," preguntas)"]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("button",{onClick:()=>{B(a),D({title:a.title,description:a.description||"",passingScore:a.passingScore||70,timeLimit:a.timeLimit||0,questions:a.questions||[]})},className:"text-blue-600 hover:text-blue-800",children:(0,b.jsx)(o,{className:"h-3 w-3"})}),(0,b.jsx)("button",{onClick:()=>L(a.id),className:"text-red-600 hover:text-red-800",children:(0,b.jsx)(i.Trash,{className:"h-3 w-3"})})]})]},a.id))})]})]})]},a.id))})]}),w&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-lg font-medium text-slate-900",children:"Editar Lección"}),(0,b.jsx)("button",{onClick:()=>x(null),className:"text-slate-400 hover:text-slate-600",children:(0,b.jsx)(p.X,{className:"h-5 w-5"})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"Título"}),(0,b.jsx)("input",{type:"text",value:y.title,onChange:a=>z({...y,title:a.target.value}),className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 border"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"URL del Video (Vimeo, YouTube, etc.)"}),(0,b.jsx)("input",{type:"text",value:y.videoUrl,onChange:a=>z({...y,videoUrl:a.target.value}),placeholder:"https://vimeo.com/...",className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 border"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"Contenido"}),(0,b.jsx)("textarea",{value:y.content,onChange:a=>z({...y,content:a.target.value}),rows:6,className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 border"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"Duración (minutos)"}),(0,b.jsx)("input",{type:"number",value:y.duration,onChange:a=>z({...y,duration:parseInt(a.target.value)}),className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 border"})]}),(0,b.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,b.jsx)("button",{onClick:()=>x(null),className:"px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-md hover:bg-slate-50",children:"Cancelar"}),(0,b.jsx)("button",{onClick:F,className:"px-4 py-2 text-sm font-medium text-white bg-[#B70126] rounded-md hover:bg-red-800",children:"Guardar Cambios"})]})]})]})}),A&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-lg font-medium text-slate-900",children:"Editar Quiz"}),(0,b.jsx)("button",{onClick:()=>B(null),className:"text-slate-400 hover:text-slate-600",children:(0,b.jsx)(p.X,{className:"h-5 w-5"})})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-4 p-4 border rounded-lg bg-slate-50",children:[(0,b.jsx)("h4",{className:"font-medium text-slate-900",children:"Configuración General"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"Título"}),(0,b.jsx)("input",{type:"text",value:C.title,onChange:a=>D({...C,title:a.target.value}),className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 border"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"Descripción"}),(0,b.jsx)("textarea",{value:C.description,onChange:a=>D({...C,description:a.target.value}),rows:2,className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 border"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"Puntaje Mínimo (%)"}),(0,b.jsx)("input",{type:"number",value:C.passingScore,onChange:a=>D({...C,passingScore:parseInt(a.target.value)}),className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 border"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"Tiempo Límite (min)"}),(0,b.jsx)("input",{type:"number",value:C.timeLimit,onChange:a=>D({...C,timeLimit:parseInt(a.target.value)}),className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 border"})]})]})]}),(0,b.jsxs)("div",{className:"border-t pt-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("h4",{className:"text-lg font-medium text-slate-900",children:["Preguntas (",C.questions?.length||0,")"]}),(0,b.jsxs)("button",{onClick:()=>{let a={question:"",type:"MULTIPLE_CHOICE",options:JSON.stringify([{text:"",isCorrect:!1},{text:"",isCorrect:!1}]),correctAnswer:"",points:1,order:C.questions?.length||0};D({...C,questions:[...C.questions||[],a]})},className:"flex items-center px-3 py-1.5 text-sm font-medium text-white bg-slate-900 rounded-md hover:bg-slate-800",children:[(0,b.jsx)(h.Plus,{className:"w-4 h-4 mr-1"}),"Agregar Pregunta"]})]}),(0,b.jsx)("div",{className:"space-y-4 max-h-[500px] overflow-y-auto pr-2",children:C.questions?.map((a,c)=>{let d=[];try{let b=a.options;d="string"==typeof b?JSON.parse(b):b||[]}catch(a){d=[]}return(0,b.jsxs)("div",{className:"p-4 bg-white border border-slate-200 rounded-lg shadow-sm relative group",children:[(0,b.jsx)("button",{onClick:()=>{let a=C.questions.filter((a,b)=>b!==c);D({...C,questions:a})},className:"absolute top-4 right-4 text-slate-400 hover:text-red-600 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,b.jsx)(i.Trash,{className:"w-4 h-4"})}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:["Pregunta ",c+1]}),(0,b.jsx)("input",{type:"text",value:a.question,onChange:b=>{let d=[...C.questions];d[c]={...a,question:b.target.value},D({...C,questions:d})},className:"block w-full rounded-md border-slate-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 border font-medium",placeholder:"Escribe la pregunta aquí..."})]}),(0,b.jsxs)("div",{className:"w-24",children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Puntos"}),(0,b.jsx)("input",{type:"number",value:a.points,onChange:b=>{let d=[...C.questions];d[c]={...a,points:parseInt(b.target.value)},D({...C,questions:d})},className:"block w-full rounded-md border-slate-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 border"})]})]}),(0,b.jsxs)("div",{className:"space-y-2 pl-4 border-l-2 border-slate-100",children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-slate-500",children:"Opciones de respuesta"}),d.map((e,f)=>(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("button",{onClick:()=>{let b=d.map((a,b)=>({...a,isCorrect:b===f})),g=[...C.questions];g[c]={...a,options:JSON.stringify(b),correctAnswer:e.text},D({...C,questions:g})},className:`w-5 h-5 rounded-full border flex items-center justify-center transition-colors ${e.isCorrect?"bg-green-500 border-green-500 text-white":"border-slate-300 hover:border-green-500"}`,title:"Marcar como correcta",children:e.isCorrect&&(0,b.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})}),(0,b.jsx)("input",{type:"text",value:e.text,onChange:b=>{let g=[...d];if(g[f]={...e,text:b.target.value},e.isCorrect){let d=[...C.questions];d[c]={...a,options:JSON.stringify(g),correctAnswer:b.target.value},D({...C,questions:d})}else{let b=[...C.questions];b[c]={...a,options:JSON.stringify(g)},D({...C,questions:b})}},className:`flex-1 block rounded-md border-slate-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 border ${e.isCorrect?"border-green-500 ring-1 ring-green-500":""}`,placeholder:`Opci\xf3n ${f+1}`}),(0,b.jsx)("button",{onClick:()=>{let b=d.filter((a,b)=>b!==f),e=[...C.questions];e[c]={...a,options:JSON.stringify(b)},D({...C,questions:e})},className:"text-slate-400 hover:text-red-500",children:(0,b.jsx)(i.Trash,{className:"w-4 h-4"})})]},f)),(0,b.jsxs)("button",{onClick:()=>{let b=[...d,{text:"",isCorrect:!1}],e=[...C.questions];e[c]={...a,options:JSON.stringify(b)},D({...C,questions:e})},className:"text-xs text-blue-600 hover:text-blue-800 font-medium flex items-center mt-2",children:[(0,b.jsx)(h.Plus,{className:"w-3 h-3 mr-1"})," Agregar Opción"]})]})]})]},c)})})]}),(0,b.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[(0,b.jsx)("button",{onClick:()=>B(null),className:"px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-md hover:bg-slate-50",children:"Cancelar"}),(0,b.jsx)("button",{onClick:M,className:"px-4 py-2 text-sm font-medium text-white bg-[#B70126] rounded-md hover:bg-red-800",children:"Guardar Cambios"})]})]})]})})]})}a.s(["default",()=>q],462842)}];

//# sourceMappingURL=8f848_IVAN%20CODIGO_components_admin_CourseEditorClient_tsx_e220cb0a._.js.map