module.exports=[707648,a=>{"use strict";let b=(0,a.i(740944).default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);a.s(["CreditCard",()=>b],707648)},748996,a=>{"use strict";var b=a.i(664755),c=a.i(326938),d=a.i(740944);let e=(0,d.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),f=(0,d.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),g=c.forwardRef(({className:a,containerClassName:d,...g},h)=>{let[i,j]=c.useState(!1);return(0,b.jsxs)("div",{className:`relative ${d||""}`,children:[(0,b.jsx)("input",{type:i?"text":"password",className:`block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-[#B70126] sm:text-sm sm:leading-6 px-3 pr-10 ${a||""}`,ref:h,...g}),(0,b.jsxs)("button",{type:"button",onClick:()=>{j(!i)},className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-500 focus:outline-none",tabIndex:-1,children:[i?(0,b.jsx)(f,{className:"h-5 w-5","aria-hidden":"true"}):(0,b.jsx)(e,{className:"h-5 w-5","aria-hidden":"true"}),(0,b.jsx)("span",{className:"sr-only",children:i?"Hide password":"Show password"})]})]})});g.displayName="PasswordInput",a.s(["PasswordInput",()=>g],748996)},594211,a=>{"use strict";let b=(0,a.i(740944).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);a.s(["Lock",()=>b],594211)},512090,a=>{"use strict";var b=a.i(664755),c=a.i(483470),d=a.i(603864),e=a.i(326938);let f=(0,a.i(740944).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var g=a.i(707648),h=a.i(594211),i=a.i(188033),j=a.i(748996);function k(){let{items:a,total:k,isLoading:l,clearCart:m}=(0,c.useCart)(),n=(0,d.useRouter)(),{t:o}=(0,i.useTranslation)(),[p,q]=(0,e.useState)(!1),[r,s]=(0,e.useState)({firstName:"",lastName:"",email:"",confirmEmail:"",country:"",phone:"",age:""}),[t,u]=(0,e.useState)(""),[v,w]=(0,e.useState)(""),[x,y]=(0,e.useState)(0),[z,A]=(0,e.useState)(null),[B,C]=(0,e.useState)("idle"),[D,E]=(0,e.useState)(""),[F,G]=(0,e.useState)(!1),[H,I]=(0,e.useState)(null),[J,K]=(0,e.useState)(""),[L,M]=(0,e.useState)(""),N=async()=>{if(r.email!==r.confirmEmail)return void alert(o("checkout.emailsDoNotMatch")||"Los correos no coinciden");G(!0);try{(await fetch("/api/auth/otp/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r.email})})).ok?(C("sent"),alert(o("checkout.codeSent"))):alert(o("checkout.errorSending"))}catch(a){console.error(a),alert(o("checkout.errorSending"))}finally{G(!1)}},O=async()=>{G(!0);try{let a=await fetch("/api/auth/otp/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r.email,code:D})}),b=await a.json();a.ok?(C("verified"),I(b.verificationToken)):alert(b.error||o("checkout.invalidCode"))}catch(a){console.error(a),alert(o("checkout.invalidCode"))}finally{G(!1)}},P=async()=>{if(w(""),t.trim())try{let b=await fetch("/api/coupons/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:t,cartItems:a})}),c=await b.json();c.valid?(y(c.discountAmount),A(c.coupon.code),u("")):(w(c.message||o("checkout.invalidCoupon")),y(0),A(null))}catch(a){console.error("Error validating coupon:",a),w(o("checkout.invalidCoupon"))}};if((0,e.useEffect)(()=>{l||0!==a.length||n.push("/courses")},[a,l,n]),0===a.length)return null;let Q=a=>{let{name:b,value:c}=a.target;s(a=>({...a,[b]:c}))},R=async b=>{if(b.preventDefault(),"verified"!==B)return void alert(o("checkout.emailVerificationRequired"));if(J!==L)return void alert(o("checkout.passwordsMismatch"));q(!0);try{let b=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:a.map(a=>({courseId:a.courseId})),billingDetails:r,couponCode:z,verificationToken:H,password:J,country:r.country,phone:r.phone,age:parseInt(r.age)})}),c=await b.json();if(!b.ok)throw Error(c.error||"Something went wrong");await m(),n.push(`/checkout/success?orderId=${c.orderId}&orderNumber=${c.orderNumber}`)}catch(a){console.error("Checkout error:",a),alert(o("checkout.errorProcessing"))}finally{q(!1)}};return(0,b.jsx)("div",{className:"bg-slate-50 min-h-screen pt-32 pb-16",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,b.jsxs)("div",{className:"text-center mb-12",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-slate-900 mb-4",style:{fontFamily:"var(--font-bebas)"},children:o("checkout.title")}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 text-slate-600",children:[(0,b.jsx)(h.Lock,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"text-sm",children:o("checkout.securePayment")})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-200",children:[(0,b.jsxs)("h2",{className:"text-xl font-bold text-slate-900 mb-6 flex items-center gap-2",children:[(0,b.jsx)(f,{className:"w-5 h-5 text-primary"}),o("checkout.personalInfo")]}),(0,b.jsxs)("form",{id:"checkout-form",onSubmit:R,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:o("checkout.firstName")}),(0,b.jsx)("input",{type:"text",name:"firstName",value:r.firstName,onChange:Q,required:!0,className:"w-full px-4 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-primary focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:o("checkout.lastName")}),(0,b.jsx)("input",{type:"text",name:"lastName",value:r.lastName,onChange:Q,required:!0,className:"w-full px-4 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-primary focus:border-transparent"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:o("checkout.email")}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("input",{type:"email",name:"email",value:r.email,onChange:Q,required:!0,placeholder:"ejemplo@correo.com",disabled:"verified"===B,className:"w-full px-4 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-primary focus:border-transparent disabled:bg-slate-100 disabled:text-slate-500"}),"verified"!==B&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Confirma tu Correo"}),(0,b.jsx)("input",{type:"email",name:"confirmEmail",value:r.confirmEmail,onChange:Q,required:!0,onPaste:a=>a.preventDefault(),placeholder:"Confirma tu correo",className:"w-full px-4 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-primary focus:border-transparent"})]}),(0,b.jsxs)("div",{className:"flex justify-end",children:["idle"===B&&(0,b.jsx)("button",{type:"button",onClick:N,disabled:!r.email||!r.confirmEmail||r.email!==r.confirmEmail||F,className:"bg-slate-800 text-white px-4 py-2 rounded-lg hover:bg-slate-700 disabled:opacity-50 text-sm whitespace-nowrap w-full sm:w-auto",children:F?o("checkout.verifying"):o("checkout.verify")}),"verified"===B&&(0,b.jsxs)("span",{className:"flex items-center text-green-600 font-medium px-2",children:[(0,b.jsx)(f,{className:"w-4 h-4 mr-1"})," ",o("checkout.verified")]})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:o("checkout.country")}),(0,b.jsx)("input",{type:"text",name:"country",value:r.country,onChange:Q,required:!0,placeholder:o("checkout.countryPlaceholder"),className:"w-full px-4 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-primary focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"WhatsApp (Obligatorio)"}),(0,b.jsx)("input",{type:"tel",name:"phone",value:r.phone,onChange:Q,required:!0,placeholder:"Ej: +52 55...",className:"w-full px-4 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-primary focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:o("checkout.age")}),(0,b.jsx)("input",{type:"number",name:"age",value:r.age,onChange:Q,required:!0,min:"18",max:"100",className:"w-full px-4 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-primary focus:border-transparent"})]})]}),"sent"===B&&(0,b.jsxs)("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:o("checkout.otpLabel")}),(0,b.jsxs)("p",{className:"text-xs text-slate-500 mb-2",children:[o("checkout.otpSentTo")," ",r.email]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",value:D,onChange:a=>E(a.target.value),placeholder:o("checkout.otpPlaceholder"),className:"flex-1 px-4 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-primary focus:border-transparent"}),(0,b.jsx)("button",{type:"button",onClick:O,disabled:!D||F,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50 text-sm",children:F?o("checkout.confirming"):o("checkout.confirm")})]})]}),"verified"===B&&(0,b.jsxs)("div",{className:"space-y-4 pt-4 border-t border-slate-100",children:[(0,b.jsx)("h3",{className:"text-sm font-bold text-slate-900",children:o("checkout.createPassword")}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:o("checkout.password")}),(0,b.jsx)(j.PasswordInput,{value:J,onChange:a=>K(a.target.value),required:!0,minLength:6})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:o("checkout.confirmPassword")}),(0,b.jsx)(j.PasswordInput,{value:L,onChange:a=>M(a.target.value),required:!0,minLength:6})]})]})]})]}),(0,b.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-200",children:[(0,b.jsxs)("h2",{className:"text-xl font-bold text-slate-900 mb-6 flex items-center gap-2",children:[(0,b.jsx)(g.CreditCard,{className:"w-5 h-5 text-primary"}),o("checkout.paymentMethod")]}),(0,b.jsxs)("div",{className:"p-4 border-2 border-primary bg-red-50 rounded-xl flex items-center gap-4 cursor-pointer",children:[(0,b.jsx)("div",{className:"w-4 h-4 rounded-full bg-primary border-4 border-white shadow-sm ring-1 ring-primary"}),(0,b.jsx)("span",{className:"font-medium text-slate-900",children:o("checkout.creditCard")})]})]})]}),(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-200 sticky top-32",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-6",children:o("checkout.orderSummary")}),(0,b.jsx)("div",{className:"space-y-4 mb-6",children:a.map(a=>(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-slate-100 rounded-lg overflow-hidden flex-shrink-0",children:a.image&&(0,b.jsx)("img",{src:a.image,alt:a.title,className:"w-full h-full object-cover"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-slate-900 line-clamp-2",children:a.title}),(0,b.jsxs)("p",{className:"text-primary font-bold",children:["$",a.price.toFixed(2)]})]})]},a.id))}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:o("checkout.couponLabel")}),z?(0,b.jsxs)("div",{className:"flex justify-between items-center bg-green-50 border border-green-200 p-3 rounded-lg",children:[(0,b.jsxs)("span",{className:"text-green-700 font-medium flex items-center gap-2",children:[(0,b.jsx)(f,{className:"w-4 h-4"}),z," ",o("checkout.couponApplied")]}),(0,b.jsx)("button",{onClick:()=>{y(0),A(null),u(""),w("")},className:"text-red-500 hover:text-red-700 text-sm font-medium",children:o("checkout.remove")})]}):(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",value:t,onChange:a=>u(a.target.value.toUpperCase()),placeholder:o("checkout.couponPlaceholder"),className:"flex-1 px-4 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-primary focus:border-transparent uppercase"}),(0,b.jsx)("button",{type:"button",onClick:P,disabled:!t,className:"bg-slate-800 text-white px-4 py-2 rounded-lg hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed",children:o("checkout.apply")})]}),v&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v})]}),(0,b.jsxs)("div",{className:"border-t border-slate-200 pt-4 space-y-2 mb-6",children:[(0,b.jsxs)("div",{className:"flex justify-between text-slate-600",children:[(0,b.jsx)("span",{children:o("checkout.subtotal")}),(0,b.jsxs)("span",{children:["$",k.toFixed(2)]})]}),x>0&&(0,b.jsxs)("div",{className:"flex justify-between text-green-600 font-medium",children:[(0,b.jsx)("span",{children:o("checkout.discount")}),(0,b.jsxs)("span",{children:["-$",x.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-lg font-bold text-slate-900 border-t border-slate-200 pt-2 mt-2",children:[(0,b.jsx)("span",{children:o("checkout.total")}),(0,b.jsxs)("span",{children:["$",(k-x).toFixed(2)]})]})]}),(0,b.jsx)("button",{type:"submit",form:"checkout-form",disabled:p,className:"w-full bg-primary text-white py-4 rounded-xl font-bold text-lg hover:bg-[#D9012D] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:p?o("checkout.processing"):`${o("checkout.pay")} $${(k-x).toFixed(2)}`}),(0,b.jsx)("p",{className:"text-xs text-center text-slate-500 mt-4",children:o("checkout.terms")})]})})]})]})})}a.s(["default",()=>k],512090)}];

//# sourceMappingURL=Documents_KETING%20MEDIA_NUEVOS%20PROYECTOS%20ANTIGRAVITY_IVAN%20CODIGO_1a283f14._.js.map