(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,233410,e=>{"use strict";let t=(0,e.i(546185).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],233410)},288816,e=>{"use strict";let t=(0,e.i(546185).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],288816)},425857,e=>{"use strict";var t=e.i(489989),s=e.i(297522),l=e.i(578211),a=e.i(233410),o=e.i(288816),r=e.i(724651),i=e.i(72197);function d({postId:e}){let d=(0,l.useRouter)(),[n,c]=(0,s.useState)(!1),[m,u]=(0,s.useState)(!!e),[h,x]=(0,s.useState)({title:"",slug:"",excerpt:"",content:"",image:"",published:!1,language:"es"});(0,s.useEffect)(()=>{e&&"new"!==e&&fetch(`/api/blog/${e}`).then(e=>e.json()).then(e=>{x({title:e.title||"",slug:e.slug||"",excerpt:e.excerpt||"",content:e.content||"",image:e.image||"",published:e.published||!1,language:e.language||"es"}),u(!1)}).catch(e=>{console.error(e),u(!1)})},[e]);let g=t=>{let{name:s,value:l}=t.target;if(x(e=>({...e,[s]:l})),"title"===s&&!e){let e=l.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");x(t=>({...t,slug:e}))}},p=async t=>{t.preventDefault(),c(!0);try{let t=e&&"new"!==e?`/api/blog/${e}`:"/api/blog",s=e&&"new"!==e?"PUT":"POST",l=await fetch(t,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(!l.ok){let e=await l.json();throw Error(e.error||"Something went wrong")}d.push("/admin/blog"),d.refresh()}catch(e){console.error(e),alert("Failed to save post")}finally{c(!1)}},b=async()=>{if(confirm("Are you sure you want to delete this post?")){c(!0);try{if(!(await fetch(`/api/blog/${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete");d.push("/admin/blog"),d.refresh()}catch(e){console.error(e),alert("Failed to delete post"),c(!1)}}};return m?(0,t.jsx)("div",{children:"Loading..."}):(0,t.jsxs)("form",{onSubmit:p,className:"space-y-8 max-w-4xl mx-auto pb-12",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(i.default,{href:"/admin/blog",className:"rounded-full p-2 hover:bg-slate-100 text-slate-500",children:(0,t.jsx)(o.ArrowLeft,{className:"h-5 w-5"})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:e&&"new"!==e?"Edit Post":"Create New Post"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[e&&"new"!==e&&(0,t.jsxs)("button",{type:"button",onClick:b,className:"flex items-center gap-2 rounded-md border border-red-200 bg-white px-4 py-2 text-sm font-medium text-red-600 hover:bg-red-50",disabled:n,children:[(0,t.jsx)(r.Trash2,{className:"h-4 w-4"}),"Delete"]}),(0,t.jsxs)("button",{type:"submit",disabled:n,className:"flex items-center gap-2 rounded-md bg-[#B70126] px-6 py-2 text-sm font-medium text-white hover:bg-red-800 transition-colors disabled:opacity-50",children:[(0,t.jsx)(a.Save,{className:"h-4 w-4"}),n?"Saving...":"Save Post"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-3",children:[(0,t.jsx)("div",{className:"lg:col-span-2 space-y-6",children:(0,t.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-slate-700",children:"Title"}),(0,t.jsx)("input",{type:"text",id:"title",name:"title",value:h.title,onChange:g,required:!0,className:"mt-1 block w-full rounded-md border border-slate-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 sm:text-sm",placeholder:"Enter post title"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"slug",className:"block text-sm font-medium text-slate-700",children:"Slug"}),(0,t.jsx)("input",{type:"text",id:"slug",name:"slug",value:h.slug,onChange:g,required:!0,className:"mt-1 block w-full rounded-md border border-slate-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 sm:text-sm",placeholder:"url-friendly-slug"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-slate-700",children:"Content (HTML supported)"}),(0,t.jsxs)("div",{className:"mt-1",children:[(0,t.jsx)("textarea",{id:"content",name:"content",rows:15,value:h.content,onChange:g,required:!0,className:"block w-full rounded-md border border-slate-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 sm:text-sm font-mono",placeholder:"<p>Write your content here...</p>"}),(0,t.jsx)("p",{className:"mt-2 text-xs text-slate-500",children:"Banners will be automatically injected after the 2nd paragraph and distributed throughout the content."})]})]})]})}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm space-y-4",children:[(0,t.jsx)("h3",{className:"font-medium text-slate-900",children:"Publishing"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"published",name:"published",checked:h.published,onChange:e=>{let{name:t,checked:s}=e.target;x(e=>({...e,[t]:s}))},className:"h-4 w-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"}),(0,t.jsx)("label",{htmlFor:"published",className:"text-sm text-slate-700",children:"Published"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"language",className:"block text-sm font-medium text-slate-700 mb-1",children:"Language"}),(0,t.jsxs)("select",{id:"language",name:"language",value:h.language,onChange:g,className:"block w-full rounded-md border border-slate-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 sm:text-sm",children:[(0,t.jsx)("option",{value:"es",children:"EspaÃ±ol"}),(0,t.jsx)("option",{value:"en",children:"English"})]})]})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm space-y-4",children:[(0,t.jsx)("h3",{className:"font-medium text-slate-900",children:"Meta & Media"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"excerpt",className:"block text-sm font-medium text-slate-700",children:"Excerpt"}),(0,t.jsx)("textarea",{id:"excerpt",name:"excerpt",rows:3,value:h.excerpt,onChange:g,className:"mt-1 block w-full rounded-md border border-slate-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 sm:text-sm",placeholder:"Short summary..."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"image",className:"block text-sm font-medium text-slate-700",children:"Featured Image URL"}),(0,t.jsx)("input",{type:"text",id:"image",name:"image",value:h.image,onChange:g,className:"mt-1 block w-full rounded-md border border-slate-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 sm:text-sm",placeholder:"/images/blog/..."}),h.image&&(0,t.jsx)("div",{className:"mt-2 aspect-video w-full overflow-hidden rounded-lg bg-slate-100",children:(0,t.jsx)("img",{src:h.image,alt:"Preview",className:"h-full w-full object-cover"})})]})]})]})]})]})}e.s(["default",()=>d])}]);