(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,725743,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let s=e.r(451424);function a({reason:e,children:t}){if("undefined"==typeof window)throw Object.defineProperty(new s.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},382462,(e,t,r)=>{"use strict";function s(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"encodeURIPath",{enumerable:!0,get:function(){return s}})},53652,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"PreloadChunks",{enumerable:!0,get:function(){return o}});let s=e.r(489989),a=e.r(53866),l=e.r(25778),n=e.r(382462);function o({moduleIds:e}){if("undefined"!=typeof window)return null;let t=l.workAsyncStorage.getStore();if(void 0===t)return null;let r=[];if(t.reactLoadableManifest&&e){let s=t.reactLoadableManifest;for(let t of e){if(!s[t])continue;let e=s[t].files;r.push(...e)}}return 0===r.length?null:(0,s.jsx)(s.Fragment,{children:r.map(e=>{let r=`${t.assetPrefix}/_next/${(0,n.encodeURIPath)(e)}`;return e.endsWith(".css")?(0,s.jsx)("link",{precedence:"dynamic",href:r,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,a.preload)(r,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},519668,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return d}});let s=e.r(489989),a=e.r(297522),l=e.r(725743),n=e.r(53652);function o(e){return{default:e&&"default"in e?e.default:e}}let i={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},d=function(e){let t={...i,...e},r=(0,a.lazy)(()=>t.loader().then(o)),d=t.loading;function u(e){let o=d?(0,s.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,i=!t.ssr||!!t.loading,u=i?a.Suspense:a.Fragment,c=t.ssr?(0,s.jsxs)(s.Fragment,{children:["undefined"==typeof window?(0,s.jsx)(n.PreloadChunks,{moduleIds:t.modules}):null,(0,s.jsx)(r,{...e})]}):(0,s.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,s.jsx)(r,{...e})});return(0,s.jsx)(u,{...i?{fallback:o}:{},children:c})}return u.displayName="LoadableComponent",u}},485288,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return a}});let s=e.r(231161)._(e.r(519668));function a(e,t){let r={};"function"==typeof e&&(r.loader=e);let a={...r,...t};return(0,s.default)({...a,modules:a.loadableGenerated?.modules})}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},247270,e=>{"use strict";var t=e.i(489989),r=e.i(297522),s=e.i(281130);let a=(0,e.i(546185).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var l=e.i(705158),n=e.i(898421);let o=(0,e.i(485288).default)(()=>e.A(753386),{loadableGenerated:{modules:[733343]},ssr:!1});function i(){let[e,i]=(0,r.useState)([]),[d,u]=(0,r.useState)("all"),[c,m]=(0,r.useState)(""),[f,p]=(0,r.useState)(""),[b,h]=(0,r.useState)(""),[x,y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{fetch("/api/admin/payments/config").then(()=>j())},[]);let j=async()=>{try{let e=await fetch("/api/courses");if(e.ok){let t=await e.json();i(t),t.length>0&&m(t[0].id)}}catch(e){console.error(e)}},g=async e=>{if(e.preventDefault(),!f||!b)return void s.toast.error("Por favor completa el asunto y el mensaje");y(!0);try{let e=await fetch("/api/admin/email/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({target:d,courseId:"course"===d?c:void 0,subject:f,message:b})}),t=await e.json();if(!e.ok)throw Error(t.error||"Error al enviar");s.toast.success(`Enviado correctamente a ${t.sent} usuarios`),p(""),h("")}catch(e){s.toast.error(e.message)}finally{y(!1)}};return(0,t.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Email Marketing"}),(0,t.jsx)("p",{className:"text-slate-500 mb-8",children:"Envía correos masivos a tus alumnos o grupos específicos."}),(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:(0,t.jsxs)("form",{onSubmit:g,className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Destinatarios"}),(0,t.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>u("all"),className:`flex-1 flex items-center justify-center gap-2 p-3 rounded-lg border-2 transition-all ${"all"===d?"border-primary bg-primary/5 text-primary":"border-slate-200 hover:border-slate-300 text-slate-600"}`,children:[(0,t.jsx)(l.Users,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"font-medium",children:"Todos los Alumnos"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>u("course"),className:`flex-1 flex items-center justify-center gap-2 p-3 rounded-lg border-2 transition-all ${"course"===d?"border-primary bg-primary/5 text-primary":"border-slate-200 hover:border-slate-300 text-slate-600"}`,children:[(0,t.jsx)(n.BookOpen,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"font-medium",children:"Por Curso"})]}),(0,t.jsx)("button",{type:"button",onClick:()=>u("leads"),className:`flex-1 flex items-center justify-center gap-2 p-3 rounded-lg border-2 transition-all ${"leads"===d?"border-primary bg-primary/5 text-primary":"border-slate-200 hover:border-slate-300 text-slate-600"}`,children:(0,t.jsx)("span",{className:"font-medium",children:"Prospectos (Leads)"})})]}),"course"===d&&(0,t.jsx)("div",{className:"animate-in fade-in slide-in-from-top-2",children:(0,t.jsx)("select",{value:c,onChange:e=>m(e.target.value),className:"w-full rounded-md border-slate-300 shadow-sm focus:border-primary focus:ring-primary py-2 px-3 border",children:e.map(e=>(0,t.jsx)("option",{value:e.id,children:e.title},e.id))})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Asunto"}),(0,t.jsx)("input",{type:"text",value:f,onChange:e=>p(e.target.value),className:"w-full rounded-md border-slate-300 shadow-sm focus:border-primary focus:ring-primary py-2 px-3 border",placeholder:"Ej: Nuevo curso disponible: Protección Avanzada"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Mensaje"}),(0,t.jsx)("div",{className:"bg-white",children:(0,t.jsx)(o,{theme:"snow",value:b,onChange:h,modules:{toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]]},className:"h-64 mb-12"})})]}),(0,t.jsx)("div",{className:"pt-4 border-t border-slate-100 flex justify-end",children:(0,t.jsx)("button",{type:"submit",disabled:x,className:"flex items-center gap-2 px-6 py-2.5 bg-primary text-white font-medium rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-sm shadow-primary/20",children:x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"h-4 w-4 border-2 border-white/50 border-t-white rounded-full animate-spin"}),"Enviando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a,{className:"h-4 w-4"}),"Enviar Correos"]})})})]})})]})}e.s(["default",()=>i],247270)},753386,e=>{e.v(t=>Promise.all(["static/chunks/56304617acb81a77.js","static/chunks/73bd53349e7906d3.js"].map(t=>e.l(t))).then(()=>t(733343)))}]);