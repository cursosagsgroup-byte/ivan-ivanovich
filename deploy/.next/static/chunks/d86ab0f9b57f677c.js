(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,249240,e=>{"use strict";let s=(0,e.i(546185).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>s],249240)},233410,e=>{"use strict";let s=(0,e.i(546185).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>s],233410)},288816,e=>{"use strict";let s=(0,e.i(546185).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>s],288816)},815384,e=>{"use strict";var s=e.i(489989),t=e.i(297522),r=e.i(578211);let i=t.forwardRef(({className:e,variant:t="default",size:r="default",...i},a)=>(0,s.jsx)("button",{ref:a,className:`inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ${{default:"bg-primary text-primary-foreground hover:bg-primary/90 text-white",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-slate-100 hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-slate-100 hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"}[t]} ${{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}[r]} ${e||""}`,...i}));i.displayName="Button";let a=t.forwardRef(({className:e,type:t,...r},i)=>(0,s.jsx)("input",{type:t,className:`flex h-10 w-full rounded-md border border-slate-300 bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${e||""}`,ref:i,...r}));a.displayName="Input";let n=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)("label",{ref:r,className:`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${e||""}`,...t}));n.displayName="Label";let l=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)("textarea",{className:`flex min-h-[80px] w-full rounded-md border border-slate-300 bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${e||""}`,ref:r,...t}));l.displayName="Textarea";let o=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:`rounded-lg border bg-white shadow-sm ${e||""}`,...t}));o.displayName="Card";let d=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:`flex flex-col space-y-1.5 p-6 ${e||""}`,...t}));d.displayName="CardHeader";let c=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)("h3",{ref:r,className:`text-2xl font-semibold leading-none tracking-tight ${e||""}`,...t}));c.displayName="CardTitle";let u=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:`p-6 pt-0 ${e||""}`,...t}));u.displayName="CardContent";var f=e.i(249240),h=e.i(724651),x=e.i(233410),m=e.i(288816);let g=(0,e.i(546185).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var p=e.i(281130);function v({params:e}){let v=(0,r.useRouter)(),[b,j]=(0,t.useState)(null),[y,N]=(0,t.useState)(!0),[w,C]=(0,t.useState)(!1);(0,t.useEffect)(()=>{k()},[e.quizId]);let k=async()=>{try{let s=await fetch(`/api/quizzes/${e.quizId}`);if(!s.ok)throw Error("Failed to fetch quiz");let t=await s.json();j(t)}catch(e){p.toast.error("Error loading quiz"),console.error(e)}finally{N(!1)}},q=async()=>{if(b){C(!0);try{if(!(await fetch(`/api/quizzes/${e.quizId}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).ok)throw Error("Failed to save quiz");p.toast.success("Quiz saved successfully"),v.refresh()}catch(e){p.toast.error("Error saving quiz"),console.error(e)}finally{C(!1)}}},z=(e,s,t)=>{if(!b)return;let r=[...b.questions];r[e]={...r[e],[s]:t},j({...b,questions:r})};return y?(0,s.jsx)("div",{className:"p-8 text-center",children:"Loading quiz..."}):b?(0,s.jsxs)("div",{className:"max-w-4xl mx-auto p-6 space-y-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)(i,{variant:"ghost",onClick:()=>v.back(),children:[(0,s.jsx)(m.ArrowLeft,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Edit Quiz"})]}),(0,s.jsx)(i,{onClick:q,disabled:w,className:"bg-[#B70126] hover:bg-[#9a0120]",children:w?"Saving...":(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Save,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]}),(0,s.jsxs)(o,{children:[(0,s.jsx)(d,{children:(0,s.jsx)(c,{children:"Quiz Settings"})}),(0,s.jsxs)(u,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(n,{children:"Title"}),(0,s.jsx)(a,{value:b.title,onChange:e=>j({...b,title:e.target.value})})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(n,{children:"Description"}),(0,s.jsx)(l,{value:b.description||"",onChange:e=>j({...b,description:e.target.value})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(n,{children:"Passing Score (%)"}),(0,s.jsx)(a,{type:"number",value:b.passingScore,onChange:e=>j({...b,passingScore:parseInt(e.target.value)})})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(n,{children:"Time Limit (minutes, 0 for unlimited)"}),(0,s.jsx)(a,{type:"number",value:b.timeLimit||0,onChange:e=>j({...b,timeLimit:parseInt(e.target.value)})})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold",children:["Questions (",b.questions.length,")"]}),(0,s.jsxs)(i,{onClick:()=>{if(!b)return;let e={question:"",type:"MULTIPLE_CHOICE",options:[{text:"",isCorrect:!1},{text:"",isCorrect:!1}],correctAnswer:"",points:1,order:b.questions.length};j({...b,questions:[...b.questions,e]})},variant:"outline",children:[(0,s.jsx)(f.Plus,{className:"w-4 h-4 mr-2"}),"Add Question"]})]}),b.questions.map((e,t)=>(0,s.jsxs)(o,{className:"relative",children:[(0,s.jsx)(i,{variant:"ghost",size:"icon",className:"absolute top-4 right-4 text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>(e=>{if(!b)return;let s=b.questions.filter((s,t)=>t!==e);j({...b,questions:s})})(t),children:(0,s.jsx)(h.Trash2,{className:"w-4 h-4"})}),(0,s.jsxs)(u,{className:"pt-6 space-y-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsxs)(n,{children:["Question ",t+1]}),(0,s.jsx)(a,{value:e.question,onChange:e=>z(t,"question",e.target.value),placeholder:"Enter your question here",className:"font-medium"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(n,{children:"Options"}),e.options.map((e,r)=>(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:()=>((e,s)=>{if(!b)return;let t=[...b.questions];t[e].options.forEach(e=>e.isCorrect=!1),t[e].options[s].isCorrect=!0,t[e].correctAnswer=t[e].options[s].text,j({...b,questions:t})})(t,r),className:`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${e.isCorrect?"border-green-500 bg-green-500 text-white":"border-slate-300 hover:border-green-400 text-transparent"}`,title:"Mark as correct answer",children:(0,s.jsx)(g,{className:"w-4 h-4"})}),(0,s.jsx)(a,{value:e.text,onChange:e=>((e,s,t)=>{if(!b)return;let r=[...b.questions];r[e].options[s].text=t,r[e].options[s].isCorrect&&(r[e].correctAnswer=t),j({...b,questions:r})})(t,r,e.target.value),placeholder:`Option ${r+1}`,className:e.isCorrect?"border-green-500 ring-1 ring-green-500":""}),(0,s.jsx)(i,{variant:"ghost",size:"icon",onClick:()=>((e,s)=>{if(!b)return;let t=[...b.questions];t[e].options=t[e].options.filter((e,t)=>t!==s),j({...b,questions:t})})(t,r),className:"text-slate-400 hover:text-red-500",children:(0,s.jsx)(h.Trash2,{className:"w-4 h-4"})})]},r)),(0,s.jsxs)(i,{variant:"ghost",size:"sm",onClick:()=>(e=>{if(!b)return;let s=[...b.questions];s[e].options.push({text:"",isCorrect:!1}),j({...b,questions:s})})(t),className:"ml-9 text-slate-500",children:[(0,s.jsx)(f.Plus,{className:"w-3 h-3 mr-2"}),"Add Option"]})]}),(0,s.jsx)("div",{className:"flex items-center gap-4 pt-2 border-t",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(n,{children:"Points:"}),(0,s.jsx)(a,{type:"number",className:"w-20",value:e.points,onChange:e=>z(t,"points",parseInt(e.target.value))})]})})]})]},t))]})]}):(0,s.jsx)("div",{className:"p-8 text-center",children:"Quiz not found"})}e.s(["default",()=>v],815384)}]);