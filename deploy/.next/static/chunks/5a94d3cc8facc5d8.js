(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,233410,e=>{"use strict";let a=(0,e.i(546185).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>a],233410)},686037,e=>{"use strict";let a=(0,e.i(546185).default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);e.s(["CreditCard",()=>a],686037)},779651,e=>{"use strict";var a=e.i(489989),t=e.i(297522),s=e.i(281130),r=e.i(233410),l=e.i(546185);let i=(0,l.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var n=e.i(686037);let o=(0,l.default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),d=[{id:"mercadopago",name:"MercadoPago",icon:(0,l.default)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),fields:[{name:"publicKey",label:"Public Key",type:"text"},{name:"secretKey",label:"Access Token",type:"password"},{name:"webhookSecret",label:"Webhook Secret",type:"password"}]},{id:"stripe",name:"Stripe",icon:n.CreditCard,fields:[{name:"publicKey",label:"Publishable Key",type:"text"},{name:"secretKey",label:"Secret Key",type:"password"},{name:"webhookSecret",label:"Webhook Secret",type:"password"}]},{id:"paypal",name:"PayPal",icon:o,fields:[{name:"clientId",label:"Client ID",type:"text"},{name:"clientSecret",label:"Client Secret",type:"password"}]}];function c(){let[e,l]=(0,t.useState)({}),[n,o]=(0,t.useState)(!0),[c,m]=(0,t.useState)(null);(0,t.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=await fetch("/api/admin/payments/config");if(!e.ok)throw Error("Error al cargar configuraciones");let a=await e.json(),t={};a.forEach(e=>{t[e.gateway]=e}),l(t)}catch(e){console.error(e),s.toast.error("Error al cargar las configuraciones")}finally{o(!1)}},x=async(e,a)=>{m(e);try{let t=await fetch("/api/admin/payments/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gateway:e,...a})});if(!t.ok)throw Error("Error al guardar");let r=await t.json();l(a=>({...a,[e]:r})),s.toast.success(`Configuraci\xf3n de ${e} guardada`)}catch(e){console.error(e),s.toast.error("Error al guardar la configuración")}finally{m(null)}},h=(e,a,t)=>{l(s=>({...s,[e]:{...s[e],gateway:e,[a]:t}}))};return n?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):(0,a.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,a.jsx)("a",{href:"/dashboard",className:"p-2 hover:bg-slate-100 rounded-full transition-colors text-slate-500 hover:text-slate-900",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("path",{d:"m15 18-6-6 6-6"})})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Configuración de Pasarelas de Pago"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(t=>{let s=e[t.id]||{gateway:t.id,enabled:!1,testMode:!0},l=t.icon;return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-slate-100 bg-slate-50 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-white rounded-lg border border-slate-200",children:(0,a.jsx)(l,{className:"h-6 w-6 text-primary"})}),(0,a.jsx)("h3",{className:"font-semibold text-slate-800",children:t.name})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${s.enabled?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600"}`,children:s.enabled?"Activo":"Inactivo"})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Habilitar Pasarela"}),(0,a.jsx)("button",{onClick:()=>h(t.id,"enabled",!s.enabled),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 ${s.enabled?"bg-primary":"bg-slate-200"}`,children:(0,a.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${s.enabled?"translate-x-5":"translate-x-0"}`})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("label",{className:"text-sm font-medium text-slate-700 flex items-center gap-2",children:["Modo de Prueba",(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsx)(i,{className:"h-4 w-4 text-slate-400 cursor-help"}),(0,a.jsx)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-48 p-2 bg-slate-800 text-white text-xs rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10",children:"Activa esto para usar las credenciales de sandbox/prueba."})]})]}),(0,a.jsx)("button",{onClick:()=>h(t.id,"testMode",!s.testMode),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 ${s.testMode?"bg-amber-500":"bg-slate-200"}`,children:(0,a.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${s.testMode?"translate-x-5":"translate-x-0"}`})})]}),(0,a.jsx)("div",{className:"space-y-4",children:t.fields.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:e.label}),(0,a.jsx)("input",{type:e.type,value:s[e.name]||"",onChange:a=>h(t.id,e.name,a.target.value),placeholder:"password"===e.type?"••••••••":"",className:"block w-full rounded-md border-slate-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm py-2 px-3 border"})]},e.name))})]}),(0,a.jsx)("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex justify-end",children:(0,a.jsx)("button",{onClick:()=>x(t.id,s),disabled:c===t.id,className:"flex items-center gap-2 px-4 py-2 bg-primary text-white text-sm font-medium rounded-md hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c===t.id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"h-4 w-4 border-2 border-white/50 border-t-white rounded-full animate-spin"}),"Guardando..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Save,{className:"h-4 w-4"}),"Guardar Cambios"]})})})]},t.id)})})]})}e.s(["default",()=>c],779651)}]);